# Настройка Telegram Bot для уведомлений

## Проблема "chat not found"

Если вы получаете ошибку "Bad Request: chat not found" при отправке сообщений администратору, это означает, что диалог между ботом и администратором не инициализирован.

## Пошаговое решение

### 1. Получение Telegram ID администратора

1. Найдите вашего бота в Telegram по имени пользователя или токену
2. Отправьте боту команду `/start`
3. Отправьте боту команду `/myid`
4. Бот покажет ваш Telegram ID в формате числа (например: `123456789`)

### 2. Настройка конфигурации

Откройте файл `appsettings.json` и убедитесь, что параметр `AdminUserId` содержит ваш корректный ID:

```json
{
  "BotConfig": {
    "BotToken": "ваш_токен_бота",
    "AdminUserId": 123456789,  // ? Ваш Telegram ID
    "EnableBotNotifications": true,
    "EnableManagementCommands": true
  }
}
```

### 3. Инициализация диалога

После настройки конфигурации:

1. Перезапустите приложение
2. Отправьте боту команду `/start` 
3. Если настройка корректна, бот ответит: "Добро пожаловать, администратор!"

### 4. Тестирование уведомлений

Выполните команду `/test_notifications` для проверки работы уведомлений.

## Доступные команды администратора

- `/start` - Инициализация диалога
- `/status` - Статус системы архивирования  
- `/stats` - Статистика обработки сообщений
- `/test_notifications` - Тест отправки уведомлений
- `/restart_bot` - Перезапуск Bot polling
- `/help` - Справка по командам
- `/myid` - Получить свой Telegram ID

## Устранение неполадок

### Ошибка "chat not found"
- Убедитесь, что вы отправили боту команду `/start`
- Проверьте правильность `AdminUserId` в конфигурации
- Убедитесь, что не заблокировали бота

### Ошибка "bot was blocked"  
- Разблокируйте бота в Telegram
- Отправьте команду `/start` заново

### Ошибка "user not found"
- Проверьте правильность `AdminUserId`
- Получите корректный ID через команду `/myid`

## Безопасность

- Никогда не публикуйте токен бота в открытых репозиториях
- Убедитесь, что только доверенные лица знают токен бота
- Регулярно проверяйте список пользователей, которые писали боту