# Запуск Telegram Chat Archiver Web Application

## Исправленные проблемы:

1. ? **Исправлен дублированный код** в `TelegramArchiverService.cs`
2. ? **Добавлены настройки URL** в `launchSettings.json` и `appsettings.json` 
3. ? **Упрощен запуск веб-сервера** - теперь работает без HTTPS
4. ? **Добавлен офлайн режим** в Dashboard для работы без API
5. ? **Улучшена обработка ошибок** - веб-сервер запускается даже при проблемах с Telegram API
6. ? **Проблема с типом проекта решена** - проект теперь как **веб-приложение** (`Microsoft.NET.Sdk.Web`)

## Способы запуска:

### 1. Через пакетный файл (рекомендуется):
```bash
start_web_app.bat
```

### 2. Через командную строку:
```bash
cd Telegram.HostedApp
dotnet run
```

### 3. Через Visual Studio:
- Откройте проект `Telegram.HostedApp`
- Нажмите **F5** или **Ctrl+F5**

## После запуска:

- **Главная страница**: http://localhost:5000
- **Тестовый endpoint**: http://localhost:5000/test
- **Health Check**: http://localhost:5000/health
- **API мониторинга**: http://localhost:5000/api/monitoring/ping

## Что должно работать:

- ? Веб-сервер стартует на порту 5000
- ? Dashboard загружается (даже если Telegram API недоступно)
- ? Health checks работают
- ? API endpoints доступны
- ? Статические файлы (CSS, JS, HTML) загружаются
- ? Telegram функции работают в фоновом режиме

## Диагностика:

Если проблемы остались:

1. **Проверьте порт 5000:**
   ```bash
   netstat -an | find "5000"
   ```

2. **Проверьте логи в консоли** - теперь выводятся детальные сообщения

3. **Попробуйте другой порт** (измените в `Program.cs`):
   ```csharp
   webBuilder.UseUrls("http://localhost:5001");
   ```

4. **Запустите от имени администратора**

## Особенности:

- **Веб-сервер запускается независимо** от состояния Telegram API
- **Dashboard имеет офлайн режим** если API недоступно
- **Детальное логирование** всех этапов запуска
- **Graceful degradation** - сервисы регистрируются по одному с обработкой ошибок

Теперь приложение должно запускаться как полноценное веб-приложение! ??